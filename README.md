# Analyze Android Lint XML Report

A Bitrise step that analyzes the XML report generated by the Android Lint step and counts the number of occurrences for each error type. If the report contains at least one error or fatal issue, the step fails and throws an error. This step provides insight into the quality of your Android code by identifying common issues and ensuring that your code meets best practices.

## Requirements

- This step must be executed after the Android Lint step in the Bitrise workflow, as it requires the XML report generated by Android Lint as input. If the XML report is not available, the step will fail.
- This step uses next input variables:
  1. `Project location` : The root directory of your android project, for example, where your root `build.gradle` file exists (also `gradlew`, `settings.gradle`, etc...). This parameter should match Android Lint's Project Location variable.
  2. `Module` : Set the module that you had lint. This parameter should match Android Lint's Module variable.
  3. `Variant` : Set the variant that you had lint. This parameter should match Android Lint's Variant variable.

## How to use this Step

To use the step, you must first add it to your Bitrise workflow after the Android Lint step.

Simply add this step inside your `bitrise.yml` file as follows:
`git::https://github.com/URL/to/this/repository.git: {}`

Use this code snippet as reference:

```yaml
workflows:
  "name_of_your_workflow": 
      steps:
         # .... 
         - android-lint@0: {}
         - git::https://github.com/nttr-mypocket/bitrise_step_analyze_android_lint.git: {}
         # ....
```

This step expects the following input variables by default:

  1. `$PROJECT_LOCATION` : The root directory of your Android project where your root `build.gradle` file exists (also `gradlew`, `settings.gradle`, etc.). This parameter should match Android Lint's Project Location variable.
  2. `$MODULE` : The module that you ran the Android Lint check on. This parameter should match Android Lint's Module variable.
  3. `$VARIANT` : The build variant that you ran the Android Lint check on. This parameter should match Android Lint's Variant variable.

If the XML report generated by the Android Lint step contains at least one `error` or `fatal` issue, this step will **fail and stop the workflow**. In this case, any subsequent steps in the workflow will not be executed. If you have any crucial steps that should always run, regardless of whether this step fails or not, make sure to turn on the `Run if previous step failed` switch in the step settings.

## Outputs

The step generates the following output variables:

- `$LINT_XML_OUTPUT` : The path to the Android Lint XML report generated by the Android Lint step.
- `$LINT_HTML_OUTPUT` : The path to the Android Lint HTML report generated by the Android Lint step.
- `$LINT_OUTPUT_ERROR` : The number of error issues found in the Android Lint report.
- `$LINT_OUTPUT_FATAL` : The number of fatal issues found in the Android Lint report.
- `$LINT_OUTPUT_IGNORE` : The number of ignored issues found in the Android Lint report.
- `$LINT_OUTPUT_INFO` : The number of informational issues found in the Android Lint report.
- `$LINT_OUTPUT_WARNING` : The number of warning issues found in the Android Lint report.

You can use these output variables in subsequent steps of your Bitrise workflow, for example, to send notifications or perform additional analyses.

=======
That's all ;)

## Copyright

Copyright Â© 2023 NTT Resonant Technology Inc. All Rights Reserved.
